# AppDynamics Virtual Appliance Deployment Configuration
# Updated with your real domain: appdynamics-demo.com

# ============================================
# Environment Information
# ============================================
ENVIRONMENT_NAME="appd-va"
DEPLOYMENT_PROFILE="small"  # Options: small, medium, large

# ============================================
# Network Configuration
# ============================================
DNS_DOMAIN="splunkylabs.com"
TENANT_NAME="customer1"
INGRESS_IP=""  # TO BE FILLED: IP address from one of your VMs after step 8

# ============================================
# AWS Route 53
# ============================================
HOSTED_ZONE_ID="Z06491142QTF1FNN8O9PR"
AWS_PROFILE="va-deployment"
AWS_REGION="us-west-2"

# ============================================
# Node Configuration
# ============================================
# TO BE FILLED: These will be populated after step 8 (create VMs)
NODE1_IP=""
NODE1_HOSTNAME="appdva-vm-1"

NODE2_IP=""
NODE2_HOSTNAME="appdva-vm-2"

NODE3_IP=""
NODE3_HOSTNAME="appdva-vm-3"

# ============================================
# Network Settings
# ============================================
GATEWAY_IP="10.0.0.1"
DNS_SERVER="8.8.8.8"
CIDR_MASK="24"

# ============================================
# Services to Install
# ============================================
INSTALL_CORE=true          # Controller, Events, EUM (required)
INSTALL_AIOPS=true         # Anomaly Detection
INSTALL_OTIS=false         # OpenTelemetry
INSTALL_ATD=false          # Automatic Transaction Diagnostics
INSTALL_UIL=false          # Universal Integration Layer (for Splunk)

# ============================================
# Certificate Configuration
# ============================================
USE_CUSTOM_CERTS=false
CERT_PATH=""               # Path to certificate file (if USE_CUSTOM_CERTS=true)
KEY_PATH=""                # Path to private key file (if USE_CUSTOM_CERTS=true)

# ============================================
# License Configuration
# ============================================
LICENSE_FILE_PATH=""       # Path to license.lic file (optional, can apply later)

# ============================================
# AWS Instance IDs (from CloudFormation or step 8)
# ============================================
AWS_INSTANCE1_ID=""
AWS_INSTANCE2_ID=""
AWS_INSTANCE3_ID=""

# ============================================
# Advanced Configuration
# ============================================

# Admin credentials (will be auto-generated if left empty)
ADMIN_PASSWORD=""

# SSH Configuration
SSH_USER="appduser"
SSH_KEY_PATH=""  # Leave empty to use default SSH key

# Timeouts (in seconds)
BOOTSTRAP_TIMEOUT=300
CLUSTER_TIMEOUT=600
SERVICE_INSTALL_TIMEOUT=3600

# Retry Configuration
MAX_RETRIES=3
RETRY_DELAY=10

# ============================================
# Feature Flags
# ============================================
ENABLE_MONITORING=true     # Install cluster agent for self-monitoring
SKIP_DNS_CHECK=false       # DNS is now configured with Route 53
SKIP_PREFLIGHT=false       # Skip pre-flight checks (not recommended)
DRY_RUN=false             # Show what would be done without executing

# ============================================
# Logging
# ============================================
LOG_DIR="/var/log/appd-deployment"
LOG_LEVEL="INFO"  # Options: DEBUG, INFO, WARN, ERROR

# ============================================
# DNS Records (will be created by step 9)
# ============================================
# After step 8, run: ./09-aws-create-dns-records.sh
# This will create:
#   customer1.auth.appdynamics-demo.com      → ${INGRESS_IP}
#   customer1-tnt-authn.appdynamics-demo.com → ${INGRESS_IP}
#   controller.appdynamics-demo.com          → ${INGRESS_IP}
#   *.appdynamics-demo.com                   → ${INGRESS_IP}
